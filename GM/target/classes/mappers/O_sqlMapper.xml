<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
    
<mapper namespace="com.spring.gm.persistence.O_DAO" >

<!-- 일정 -->
<!-- 게시글 갯수조회 -->
<select id="getCalendarCnt" resultType="int">
	select count(*) from schedule
</select>

<!-- 게시글 목록 조회 -->
<select id="getCalendarList" resultType="com.spring.gm.vo.ScheduleVO" parameterType="java.util.Map">
	<![CDATA[
		select * from(select begin, scheduleKind, subject, num, rownum rNum from schedule)
        where rNum >= #{start} and rNum <= #{end}
	]]> 
</select>

<!-- 일정 -->
<select id="selectCalendar" resultType="com.spring.gm.vo.ScheduleVO" parameterType="String" >
	select id, num, scheduleKind, subject, location, content, begin, end from schedule where id=#{id} and del=0
</select>

<!-- 일정등록 pro -->
<insert id="insertCalendar" parameterType="com.spring.gm.vo.ScheduleVO">
	insert into schedule 
	values(seq_schedule.nextval, #{id}, 0, 0, #{scheduleKind}, #{subject}, #{location}, #{content}, #{begin}, #{end}, 0, 0)
</insert>

<!-- 일정 상세 수정화면 -->
<select id="modifyBeforeCalendar" resultType="com.spring.gm.vo.ScheduleVO" parameterType="java.util.Map">
	select * from schedule where id = #{id} and num = #{num} and del=0
</select>

<!-- 일정 수정 -->
<update id="updateCalendar" parameterType="com.spring.gm.vo.ScheduleVO">
	update schedule set schedulekind=#{scheduleKind}, subject=#{subject}, location=#{location}, content=#{content}, begin=#{begin}, end=#{end} where num=#{num}
</update>

</mapper>